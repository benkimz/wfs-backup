@page "/counter"
@rendermode InteractiveServer
@layout PlainLayout

@inject WireframeParser WireframeParser
@inject IJSRuntime JSRuntime

@code {
    private PrimeRoot? Root { get; set; }
    protected override void OnInitialized()
    {
        base.OnInitialized();
        // we will be testing the HomePrimeRoot in this page
        Root = new HomePrimeRoot().Build(); // this will change to query from database
    }
}

@if (Root is not null)
{
    @if (Root.MetaData != null)
    {
        <HeadContent>
    @foreach (var node in Root.MetaData.Children)
            {
                @WireframeParser.RenderWireFrame(node)
            }
            @foreach (string css in Root.ExternalStyleSheets)
            {
                <link href="@css" rel="stylesheet" />
            }
            <script src="custom/js/main.js" type="text/javascript"></script>
        </HeadContent>
    }

    @WireframeParser.RenderWireFrame(Root)


    @foreach (var script in Root.BodyScripts)
    {
        <script src="@script" type="text/javascript"></script>
    }
}